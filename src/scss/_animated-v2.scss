.secondary-panel.select-types.js_visible {
  display: block;
}

.secondary-panel.select-countries.js_visible {
  display: block;
}

.secondary-panel.select-view.js_visible {
  display: block;
}

.left-flyout {
  // opacity: 0;
  position: absolute;
  transform: translate3d(0,0,0);
  transition: transform 200ms ease-in-out;
  @include laptop-width {
    width: calcVW(14, $grid);
    left: - calcVW(16, $grid);
  }
  @include desktop-only {
    width: calcVW(12, $grid);
    left: - calcVW(14, $grid);
  }
  @include xl-only {
    width: calcVW(9, $grid);
    left: - calcVW(12, $grid);
  }
  &.js_visible {
    @include laptop-width {
      transform: translate3d(calcVW(16,$grid),0,0);
    }
    @include desktop-only {
      transform: translate3d(calcVW(14,$grid),0,0);
    }
    @include xl-only {
      transform: translate3d(calcVW(12,$grid),0,0);
    }

  }
}


.right-flyout-panel {
  position: absolute;
  top: 0;
  z-index: 12;
  transform: translate3d(0,0,0);
  transition: transform 200ms ease-in-out;
  will-change: transform;
  height: 100vh;
  overflow-y: scroll;
  @include mobile-only {
    width: $cp_width--mobile;
    right: -$cp_width--mobile;
  }
  @include pre-laptop-width {
    width: 100%;
    right: -100%;
  }
  @include desktop-only {
    width: $cp_width--large;
    right: -$cp_width--large;
  }
  @include xl-only {
    width: $cp_width--xl;
    right: -$cp_width--xl;
  }

  .button--close {
    display: none;
  }

  &.right_panel_open {
    transition: transform 200ms ease-in-out;

    @include mobile-only {
      transform: translate3d(-$cp_width--mobile,0,0);
    }
    @include pre-laptop-width {
      transform: translate3d(-100%,0,0);
    }
    @include desktop-only {
      transform: translate3d(-$cp_width--large,0,0);
    }
    @include xl-only {
      transform: translate3d(-$cp_width--xl,0,0);
    }

    .details-panel__scroll {
      transform: translate3d(0,0,0);
    }


    .button--close {
      display: block;
      transition: display 200ms ease-in-out;
      transition-delay: 200ms;
    }
  }
}

.leaflet-control-container,
.right-controls-wrap {
  transition: transform 200ms ease-in-out;
  @include desktop-only {
    transform: translate3d(0,0,0);
    will-change: transform;
  }
}

.leaflet-control-container.right_panel_open,
.right-controls-wrap.right_panel_open {
  transition: transform 200ms ease-in-out;
  @include desktop-only {
    transform: translate3d(-$cp_width--large,0,0);
  }
  @include xl-only {
    transform: translate3d(-$cp_width--xl,0,0);
  }
}

.toggles-right-flyout.right_panel_open {
  display: none;
}


.mobile-menu-toggle::after {
  will-change: transform;
  transition: transform 0.2s ease-in-out;
}

.mobile-menu-toggle.js_mobile_toggled::after {
  transition: transform 0.2s ease-in-out;
  transform: rotate(-45deg);
  top: 6px;

}

.site-header.js_mobile_toggled {
  @include pre-laptop-width {
    height: auto;
    overflow: visible;
  }
}

.left-flyout,
.right-controls-wrap,
.left-menu {
  @include pre-laptop-width {
    height: 0;
    opacity: 0;
    will-change: height;
    will-change: opacity;
    &.js_mobile_toggled {
      height: auto;
      opacity: 1;
      transition: height 0.2s ease-in-out;
    }
  }
}



// also note:  reordering these list items will break layout on mobile
#finance_list_item,
#visits_list_item {
  @include mobile-only {
      will-change: height;
  }
}

#finance_list_item.js_toggled {
  @include mobile-only {
    height: calcRem($f1,16.75);
    transition: height 200ms ease-in-out;
  }
}
#visits_list_item.js_toggled {
  @include mobile-only {
    height: (calcRem($f1,10.75));
    transition: height 200ms ease-in-out;
  }
}

#finance_subtypes,
#visits_subtypes {
  visibility: hidden;
  opacity: 0;
  position: absolute;

  @include mobile-only {

    z-index: 2;
    padding-left: calcVW(2,$grid);
    padding-right: calcVW(2,$grid);
    padding-top: 0;
    padding-bottom: 0;
    width: 100%;
    border: 2px solid;

    .legend--subtypes {
      font-size: $font_size_1;
      margin-left: calcVW(6,$grid);
      padding-bottom: calcRem(1,$f1);
    }
    .label--sub-option {
      padding-left: calcVW(10, $grid);
    }
  }
  @include desktop-only {
    left: calcVW(10,$cols);
  }
}

#finance_subtypes.js_toggled,
#visits_subtypes.js_toggled {
  visibility: visible;
  opacity: 1;
  transition: visibility 0s, opacity 0.5s ease-in-out;
  @include mobile-only {
  }
  @include desktop-only {
    margin-left: calcVW(0.5,$cols);
    padding-top: 0;
    flex-basis: calcVW(4,$cols);
  }
}
#finance_subtypes.js_toggled {
  @include mobile-only {
    top: calcRem($f1,11);
  }
  @include desktop-only {
    top: calcRem($f1,5.5);
  }
}
#visits_subtypes.js_toggled {
  @include mobile-only {
    top: calcRem($f1,20);
  }
  @include desktop-only {
    top: calcRem($f1,14.5);
  }
}

#export_data_options {
  visibility: hidden;
  opacity: 0;
  height: 0;
  will-change: height;
}
#export_data_options.js_toggled {
  visibility: visible;
  opacity: 1;
  transition: visibility 0s, opacity 0.5s ease-in-out;
  height: auto;
}

// themes
@include mobile-only {
  .theme--dark {
    #finance_list_item.js_toggled
    #visits_list_item.js_toggled {
      @include dark-background;
    }
    #finance_subtypes,
    #visits_subtypes {
      @include darker-background;
      @include white-border;

      .legend--subtypes {
          @include light-red-text;
      }
    }

  }

  .theme--light {
    #finance_list_item.js_toggled,
    #visits_list_item.js_toggled {
      @include light-background;
    }
    #finance_subtypes,
    #visits_subtypes {
      @include lighter-background;
      @include gray-border;

      .legend--subtypes {
        @include red-text;
      }
    }
  }
}
// end themes
